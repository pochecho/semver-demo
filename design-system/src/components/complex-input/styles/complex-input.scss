@use "../../../core/mixins/form-field-mixins.scss" as *;
@use "../../../core/mixins/input-mixins.scss" as *;
@use "../../../core/mixins/label-mixins.scss" as *;
@use "../../form-field/styles/form-field.scss" as *;
@use "../../icon/styles/icon.scss" as *;
@use "../../../core/foundations/input-foundations.scss" as *;
@use "../../../core/mixins/common-mixins.scss" as *;
@use "../../../core/configuration.scss" as *;

$input-name: "input";
$input-namespace: #{$prefix-lib}-#{$input-name};
$icon-left-error: "#{$prefix-lib}-icon-left-error";
$valid-feedback: "#{$prefix-lib}-valid-feedback";
$invalid-feedback: "#{$prefix-lib}-invalid-feedback";
$input-error: "#{$input-namespace}-error";
$input-filled: "#{$input-namespace}-filled";
$input-success: "#{$input-namespace}-success";
$input-value: "#{$input-namespace}-value";
$input-icon: "#{$prefix-lib}-icon";
$span-info: "#{$prefix-lib}-span-info";
$input-active: "#{$prefix-lib}-active";
$icon-class: "#{$prefix-lib}-icon";
$padding-left-when-icon: 30px;

%base-structure {
  @include input-style(
    none,
    1px solid $input-border-bottom-default,
    $input-label-standar,
    block,
    32px,
    0px,
    $font-size-h5,
    20px,
    90%,
    false
  );
  font-size: $font-size-label;
  width: 100%;
  ~ span {
    font-size: $font-size-p-x-small;
    color: $input-span-standar;
  }

  ~ label {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 95%;
  }

  &:not(:placeholder-shown) {
    border-bottom: 2px solid $input-border-bottom-default;
  }

  &.#{$input-error} {
    border-bottom: 2px solid $input-danger-state;

    ~ span {
      color: $input-danger-state;
      font-weight: 700;
    }
  }

  &.#{$input-success} {
    border-bottom: 2px solid $input-success-state;

    ~ span {
      color: $input-success-state;
      font-weight: 700;
    }
  }

  &.#{$input-value} {
    #{$prefix-lib}-icon ~ & {
      padding-left: 16px;
      font-size: $font-size-h5;
    }

    ~ label {
      padding-left: 16px;
    }
  }

  & {
    @include input-fonts-style(
      $input-placeholder-font-family,
      $input-font-weight,
      $input-font-size
    );
    letter-spacing: -0.3px;

    &.bc-input-value {
      @include input-fonts-style(
        $input-font-family,
        $input-value-font-weight,
        $input-value-font-size
      );

      &::placeholder {
        @include input-fonts-style(
          $input-placeholder-font-family,
          $input-placeholder-font-weight,
          $input-placeholder-font-size
        );
      }
    }
  }

  &::placeholder {
    @include input-fonts-style(
      $input-placeholder-font-family,
      $input-placeholder-font-weight,
      $input-placeholder-font-size
    );
  }

  &:focus ~ label,
  &:active ~ label,
  &.#{$input-active} ~ label {
    top: -20px;
    font-size: 14px;
    color: $input-label-standar;
    padding-left: 0;
    width: 95%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  &:valid ~ label {
    margin-left: 0px;
  }

  &:focus ~ span {
    color: $input-label-standar;
  }

  &:focus {
    border-bottom: 2px solid $input-border-bottom-focused;

    &.#{$input-error} {
      border-bottom: 2px solid $input-danger-state;

      &:focus ~ span {
        color: $input-danger-state;
      }
    }

    &.#{$input-success} {
      border-bottom: 2px solid $input-success-state;

      &:focus ~ span {
        color: $input-success-state;
      }
    }
  }

  &[disabled] {
    @include input-status-disabled();

    &:not([value=""]) {
      ~ label {
        top: -20px;
      }
    }
  }
}

// .#{$input-namespace}-area[aria-label],
// .#{$input-namespace}-area[id] {
//   @extend %base-structure;
//   @include input-style(none,
//     1px solid $input-label-standar,
//     $input-label-standar,
//     block,
//     30px,
//     0px,
//     $font-size-h4,
//     20px,
//     100%,
//     $text-area: true);

//   &:focus {
//     border-bottom: 2px solid $input-border-bottom-focused;
//   }

//   &:active {
//     border-bottom: 2px solid $input-border-bottom-focused;
//   }
// }

// .#{$input-namespace}[aria-label],
// .#{$input-namespace}[id] {
//   @extend %base-structure;

//   #{$prefix-lib}-icon~& {
//     padding-left: 30px;
//   }

//   &+#{$prefix-lib}-icon {
//     right: 0;
//     width: 24px;
//     &.#{$prefix-lib}-input {
//       padding-left: 40px;
//     }

//     left: initial;

//     &:focus-visible {
//       outline: $input-outline-color auto 1px;
//     }

//     .#{$invalid-feedback} {
//       color: $input-danger-state;
//       font-size: $font-size-p-x-small;
//     }

//     .#{$valid-feedback} {
//       color: $input-label-standar;
//       font-size: $font-size-p-x-small;
//     }

//     .#{$span-info} {
//       color: $input-label-standar;
//     }
//   }
// }

:host {
  @extend .#{$form-field-namespace};
  input {
    @extend %base-structure;

    #{$prefix-lib}-icon ~ & {
      padding-left: 30px;
    }

    & + #{$prefix-lib}-icon {
      right: 0;
      width: 24px;
      padding-left: 40px;
      &.#{$prefix-lib}-input {
      }

      left: initial;

      &:focus-visible {
        outline: $input-outline-color auto 1px;
      }

      .#{$invalid-feedback} {
        color: $input-danger-state;
        font-size: $font-size-p-x-small;
      }

      .#{$valid-feedback} {
        color: $input-label-standar;
        font-size: $font-size-p-x-small;
      }

      .#{$span-info} {
        color: $input-label-standar;
      }
    }
  }
}
